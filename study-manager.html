

        <footer class="card" style="margin-top:12px">
          <div class="muted">Lưu ý: Dữ liệu được lưu trong trình duyệt (localStorage). Mở bằng Visual Studio Code -> Lưu file .html -> Mở với Live Server để trải nghiệm đầy đủ.</div>
        </footer>
      </section>

      <!-- RIGHT: Filters, Week chart, TKB full, Self-eval -->
      <aside class="card">
        <h2>Bộ lọc & Thống kê</h2>
        <div style="display:flex;flex-direction:column;gap:8px">
          <button id="filter-all" class="btn-ghost">Tất cả</button>
          <button id="filter-today" class="btn-ghost">Hôm nay</button>
          <button id="filter-high" class="btn-ghost">Ưu tiên cao</button>
        </div>

        <hr style="margin:12px 0;border:0;border-top:1px dashed rgba(255,255,255,0.03)" />

        <h2>Tiến trình tuần</h2>
        <div id="week-chart" style="display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-top:8px"></div>

        <hr style="margin:12px 0;border:0;border-top:1px dashed rgba(255,255,255,0.03)" />

        <h2>Thời khóa biểu đầy đủ</h2>
        <div id="tkb-full" style="font-size:13px;margin-top:8px"></div>

        <hr style="margin:12px 0;border:0;border-top:1px dashed rgba(255,255,255,0.03)" />

        <h2>Tự đánh giá & Bài tập</h2>
        <input id="eval-title" type="text" placeholder="Tên bài tập / BT" />
        <input id="eval-date" type="date" />
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="add-eval">Thêm</button>
        </div>
        <div id="eval-list" style="margin-top:8px"></div>
      </aside>
    </main>
  </div>

  <script>
    const qs = s => document.querySelector(s);
    const qsa = s => document.querySelectorAll(s);
    const nowISODate = () => new Date().toISOString().slice(0,10);
    const dayName = d => {
      const map = {0:'Chủ nhật',1:'Thứ 2',2:'Thứ 3',3:'Thứ 4',4:'Thứ 5',5:'Thứ 6',6:'Thứ 7'};
      return map[d];
    };

    const KEY_TASKS = 'sm_tasks_v1';
    const KEY_NOTES = 'sm_notes_v1';
    const KEY_PLANS = 'sm_plans_v1';
    const KEY_TKB = 'sm_tkb_v1';
    const KEY_STUDY = 'sm_study_v1';
    const KEY_SUPPORT = 'sm_support_v1';
    const KEY_EVAL = 'sm_eval_v1';

    let tasks = JSON.parse(localStorage.getItem(KEY_TASKS) || '[]');
    let notes = localStorage.getItem(KEY_NOTES) || '';
    let plans = JSON.parse(localStorage.getItem(KEY_PLANS) || '[]');
    let tkb = JSON.parse(localStorage.getItem(KEY_TKB) || '{}'); 
    let studyPlan = JSON.parse(localStorage.getItem(KEY_STUDY) || '[]'); 
    let supportLinks = JSON.parse(localStorage.getItem(KEY_SUPPORT) || 'null');
    if(!supportLinks){
      supportLinks = {
        'Toán': ['https://www.youtube.com/results?search_query=c%C3%A1ch+h%E1%BB%8Dc+L%C3%BD+hi%E1%BB%87u+qu%E1%BA%A3','https://khanacademy.org'],
        'Văn': ['https://www.youtube.com/results?search_query=c%C3%A1ch+h%E1%BB%8Dc+V%C4%83n+hi%E1%BB%87u+qu%E1%BA%A3','https://lop.vn'],
        'Anh': ['https://www.youtube.com/results?search_query=c%C3%A1ch+h%E1%BB%8Dc+Ti%E1%BA%BFng+Anh+hi%E1%BB%87u+qu%E1%BA%A3','https://www.duolingo.com'],
        'Lý': ['https://www.youtube.com/results?search_query=c%C3%A1ch+h%E1%BB%8Dc+L%C3%BD+hi%E1%BB%87u+qu%E1%BA%A3'],
        'Hóa': ['https://www.youtube.com/results?search_query=c%C3%A1ch+h%E1%BB%8Dc+H%C3%B3a+hi%E1%BB%87u+qu%E1%BA%A3']
      };
      localStorage.setItem(KEY_SUPPORT, JSON.stringify(supportLinks));
    }
    let evals = JSON.parse(localStorage.getItem(KEY_EVAL) || '[]');

    const taskListEl = qs('#task-list');
    const statTotal = qs('#stat-total');
    const statDone = qs('#stat-done');
    const progressBar = qs('#progress-bar');
    const tkbListEl = qs('#tkb-list');
